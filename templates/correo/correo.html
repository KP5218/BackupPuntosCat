{% extends 'global/layout.html' %}
{% load static %}

{% block content %}
{% load custom_tags %}
{% if user.is_authenticated %}

{% if request.user|has_group:"admin" %}
<div class="container mt-3">
  <div class="row justify-content-center">
    <div class="col-md-16">
      <div class="card-header" style="background-color: rgb(78, 170, 167);">
        <h4 class="card-title text-center mt-0" style="color:white;">Creaci√≥n de Correo</h4>
      </div>
      {% if messages %}
      {% for message in messages %}
      <div style="position: fixed;top: 50px; right: 100px; width: 300px; z-index: 9999;"
           class="alert {% if message.tags == 'error' %}alert-danger{% else %}alert-success{% endif %} alert-dismissible fade show"
           role="alert">
        {{ message }}
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
      </div>
      {% endfor %}
      {% endif %}
       <form method="POST" id="form" class="form-horizontal" action="{% url 'guardar_correo' %}">
    {% csrf_token %}
    <div class="card-body" style="background-color: rgb(78, 170, 167); border: 1px solid #333; padding: 20px; margin-top:1%;">
        <div class="mb-3 row">
            <label for="rut" class="col-sm-1 col-form-label fw-bold fs-6" style="color: white;">Rut:</label>
            <div class="col-sm-5">
                <input type="text" id="rut" name="rut" maxlength="10" class="form-control" onkeypress="return isNumber(event)" oninput="checkRut(this)" required>
                <div style="margin-left:5%">
                    <span id="alerta">
                        <span id="mensaje" style="color: red;"></span>
                    </span>
                </div>
            </div>
            <label for="correo" class="col-sm-1 col-form-label fw-bold fs-6" style="color: white;">Correo:</label>
            <div class="col-sm-5">
                <input type="email" class="form-control" id="correo" name="correo" maxlength="150" required>
            </div>
        </div>
        <div class="mb-3 row">
            <label for="nombre" class="col-sm-1 col-form-label fw-bold fs-6" style="color: white;">Nombre:</label>
            <div class="col-sm-5">
                <input type="text" id="nombre" name="nombre" class="form-control" required>
            </div>
        </div>
        <div class="mb-3 row text-end">
            <div class="col-sm-15">
                <button type="submit" class="btn btn-primary" id="boton-enviar">Agregar</button>
            </div>
        </div>
    </div>
</form>
    </div>
  </div>
</div>

<script type="text/javascript" src="{% static 'js/correo/correo.js' %}"></script>
<script type="text/javascript" src="{% static 'js/correo/validacion_correo.js' %}"></script>
{% endif %}
{% endif %}
{% endblock %}
